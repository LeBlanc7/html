CREATE TABLE MV_GNR (
  GNR_NUM NUMBER,
  GNR_NM VARCHAR2(100) NOT NULL,
  PRIMARY KEY (GNR_NUM)
);

CREATE TABLE RT (
  RT_NUM NUMBER,
  RT_NM VARCHAR2(100) NOT NULL,
  PRIMARY KEY (RT_NUM)
);

CREATE TABLE MV (
  MV_NUM NUMBER,
  MV_NM VARCHAR2(100) NOT NULL,
  DIR_NM VARCHAR2(100) NOT NULL,
  MV_INT VARCHAR2(2000) NOT NULL,
  DBTR_NM VARCHAR2(100) NOT NULL,
  ATR_NM  VARCHAR2(300) NOT NULL,
  IMG_LNK VARCHAR2(200) NOT NULL,
  SCR_TIME NUMBER NOT NULL,
  RT_NUM NUMBER NOT NULL,
  GNR_NUM NUMBER NOT NULL,
  
  PRIMARY KEY(MV_NUM),
  FOREIGN KEY(RT_NUM) REFERENCES RT(RT_NUM),
  FOREIGN KEY(RT_NUM) REFERENCES RT(RT_NUM)
);

CREATE TABLE RV (
  GRD_NUM NUMBER NOT NULL,
  GRD NUMBER(1,1),
  RV VARCHAR2(1000),
  MV_NUM NUMBER NOT NULL,
  
  PRIMARY KEY (GRD_NUM),
  FOREIGN KEY (MV_NUM) REFERENCES MV(MV_NUM)
);

CREATE TABLE MEM (
  MEM_ID VARCHAR2(50)  NOT NULL,
  MEM_PW VARCHAR2(50)  NOT NULL,
  MEM_NM VARCHAR2(30) NOT NULL,
  PH_NUM  VARCHAR2(13)  NOT NULL,
  BTDY    CHAR(6)       NOT NULL,
  PNT     DECIMAL(19,4),
  
  PRIMARY KEY(MEM_ID)
);

CREATE TABLE N_MEM (
  N_MEM_ID  VARCHAR2(50)  NOT NULL,
  N_MEM_PW  VARCHAR2(30)  NOT NULL,
  PH_NUM    VARCHAR2(13)  NOT NULL,
  BTDY      CHAR(6) NOT NULL,
  
  PRIMARY KEY(N_MEM_ID)
);

CREATE TABLE LOC (
  LOC_NUM NUMBER NOT NULL,
  LOC_NM  VARCHAR2(30) NOT NULL,
  
  PRIMARY KEY(LOC_NUM)
);

CREATE TABLE THT (
  THT_NUM NUMBER NOT NULL,
  LOC_NUM NUMBER NOT NULL,
  THT_NM  VARCHAR2(20) NOT NULL,
  
  PRIMARY KEY(THT_NUM,LOC_NUM),
  FOREIGN KEY(LOC_NUM) REFERENCES LOC(LOC_NUM)
);

CREATE TABLE SEAT (
  SEAT_NUM  NUMBER NOT NULL,
  THT_NUM   NUMBER  NOT NULL,
  LOC_NUM   NUMBER  NOT NULL,
  SEAT_ROW  CHAR(1) NOT NULL,
  SEAT_COL  VARCHAR2(2) NOT NULL,

  PRIMARY KEY(SEAT_NUM,THT_NUM,LOC_NUM),
  FOREIGN KEY(THT_NUM,LOC_NUM) REFERENCES THT(THT_NUM,LOC_NUM)
);

CREATE TABLE SCR_SCH (
  SCH_NUM NUMBER(8) NOT NULL,
  MV_NUM  NUMBER(8) NOT NULL,
  SCH_DAY NUMBER  NOT NULL,
  SCR_STT_TIME  NUMBER  NOT NULL,
  SCR_TMS NUMBER  NOT NULL,
  THT_NUM NUMBER  NOT NULL,
  LOC_NUM NUMBER  NOT NULL,
  
  PRIMARY KEY(SCH_NUM),
  FOREIGN KEY(MV_NUM) REFERENCES MV(MV_NUM),
  FOREIGN KEY(THT_NUM,LOC_NUM) REFERENCES THT(THT_NUM,LOC_NUM)
);

CREATE TABLE PY_MTD (
  PY_MTD_NUM NUMBER NOT NULL,
  PY_MTD_NM VARCHAR2(20)  NOT NULL,
  DR  VARCHAR2(3) NOT NULL,
  
  PRIMARY KEY(PY_MTD_NUM)
);

CREATE TABLE PY (
  PY_NUM NUMBER NOT NULL,
  PY_AVAB CHAR(1) NOT NULL,
  PY_PRC  NUMBER  NOT NULL,
  PY_DAY  NUMBER  NOT NULL,
  PY_MTD_NUM  NUMBER,
  MEM_ID VARCHAR2(50),
  N_MEM_ID  VARCHAR2(50),
  
  PRIMARY KEY(PY_NUM),
  FOREIGN KEY(PY_MTD_NUM) REFERENCES PY_MTD(PY_MTD_NUM),
  FOREIGN KEY(MEM_ID) REFERENCES MEM(MEM_ID),
  FOREIGN KEY(N_MEM_ID) REFERENCES N_MEM(N_MEM_ID)
);

CREATE TABLE SEAT_AVAB (
  SEAT_AVAB_NUM NUMBER NOT NULL,
  SCH_NUM NUMBER NOT NULL,
  SEAT_NUM NUMBER NOT NULL,
  THT_NUM NUMBER  NOT NULL,
  LOC_NUM NUMBER  NOT NULL,
  
  PRIMARY KEY(SEAT_AVAB_NUM),
  FOREIGN KEY(SCH_NUM) REFERENCES SCR_SCH(SCH_NUM),
  FOREIGN KEY(SEAT_NUM,THT_NUM,LOC_NUM) REFERENCES SEAT(SEAT_NUM,THT_NUM,LOC_NUM)
);

CREATE TABLE TCK (
  TCK_NUM NUMBER NOT NULL,
  STD_PRC NUMBER NOT NULL,
  TCKT_AVAB CHAR(1) NOT NULL,
  RSV_DAY NUMBER  NOT NULL,
  RSV_TIME NUMBER NOT NULL,
  SEAT_AVAB_NUM NUMBER NOT NULL,
  PY_NUM  NUMBER NOT NULL,
  
  PRIMARY KEY(TCK_NUM),
  FOREIGN KEY(SEAT_AVAB_NUM) REFERENCES SEAT_AVAB(SEAT_AVAB_NUM),
  FOREIGN KEY(PY_NUM) REFERENCES PY(PY_NUM) 
);